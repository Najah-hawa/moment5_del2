"use strict";window.onload=init;let url="http://studenter.miun.se/~naha2204/dt173g/php-api/cources/read.php";const Kurskodinput=document.getElementById("Kurskod"),Kursnamninput=document.getElementById("Kursnamn"),Progressioninput=document.getElementById("Progression"),Kursplaninput=document.getElementById("Kursplan"),submitbtn=document.getElementById("submit"),button=document.getElementById("button");function init(){getCourses()}function getCourses(){fetch(url).then((e=>{if(200==e.status)return e.json().then((e=>writecources(e))).catch((e=>console.log(e)))}))}function writecources(e){const n=document.getElementById("courslist");n.innerHTML="",e.forEach((e=>{n.innerHTML+=`<li class="cource" id="${e.id}" >Kurskod: ${e.Kurskod}, Kursnamn:  ${e.Kursnamn},\n     <br> Progression: ${e.Progression}, Kursplan: ${e.Kursplan}</li>`}));let t=document.getElementsByClassName("cource");for(let e=0;e<t.length;e++)t[e].addEventListener("click",deletecoure)}function deletecoure(e){let n=e.target.id;fetch(url+"?id="+n,{method:"DELETE"}).then((e=>e.json())).then((e=>getCourses())).catch((e=>console.log(e)))}function createcource(e){e.preventDefault();let n=Kurskodinput.value,t=Kursnamninput.value,o=Progressioninput.value,u=Kursplaninput.value,s=JSON.stringify({Kurskod:n,Kursnamn:t,Progression:o,Kursplan:u});fetch(url,{method:"POST",headers:{"content-type":"application/json"},body:s}).then((e=>e.json())).then((e=>clearform())).catch((e=>console.log(e)))}function clearform(){Kurskodinput.value="",Kursnamninput.value="",Progressioninput.value="",Kursplaninput.value="",getCourses()}function myFunction(){var e=document.getElementById("myLinks");"block"===e.style.display?e.style.display="none":e.style.display="block"}submitbtn.addEventListener("click",createcource);